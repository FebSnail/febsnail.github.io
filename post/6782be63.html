<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Docker学习 | 二月蜗牛2</title><meta name="author" content="FebSnail"><meta name="copyright" content="FebSnail"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第一章、Docker概述1、Docker为什么会出现一款产品：开发—上线 两套环境（应用环境，应用配置）环境配置是十分的麻烦，每一个机器都要部署环境（集群Redis、ES、Hadoop…）  传统：开发jar，运维来做 现在：开发打包部署上线，一套流程做完  java –&gt; apk –&gt; 发布（应用商店） –&gt; 使用apk一键安装使用java –&gt;jar(环境) –&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker学习">
<meta property="og:url" content="https://febsnail.github.io/post/6782be63.html">
<meta property="og:site_name" content="二月蜗牛2">
<meta property="og:description" content="第一章、Docker概述1、Docker为什么会出现一款产品：开发—上线 两套环境（应用环境，应用配置）环境配置是十分的麻烦，每一个机器都要部署环境（集群Redis、ES、Hadoop…）  传统：开发jar，运维来做 现在：开发打包部署上线，一套流程做完  java –&gt; apk –&gt; 发布（应用商店） –&gt; 使用apk一键安装使用java –&gt;jar(环境) –&gt;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-03-29T05:31:54.000Z">
<meta property="article:modified_time" content="2023-03-29T05:35:20.328Z">
<meta property="article:author" content="FebSnail">
<meta property="article:tag" content="遗憾吗关于她">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://febsnail.github.io/post/6782be63.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-29 13:35:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="二月蜗牛2"><span class="site-name">二月蜗牛2</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-29T05:31:54.000Z" title="发表于 2023-03-29 13:31:54">2023-03-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-29T05:35:20.328Z" title="更新于 2023-03-29 13:35:20">2023-03-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第一章、Docker概述"><a href="#第一章、Docker概述" class="headerlink" title="第一章、Docker概述"></a>第一章、Docker概述</h1><h2 id="1、Docker为什么会出现"><a href="#1、Docker为什么会出现" class="headerlink" title="1、Docker为什么会出现"></a>1、Docker为什么会出现</h2><p>一款产品：开发—上线 两套环境（应用环境，应用配置）<br>环境配置是十分的麻烦，每一个机器都要部署环境（集群Redis、ES、Hadoop…）</p>
<ul>
<li>传统：开发jar，运维来做</li>
<li>现在：开发打包部署上线，一套流程做完</li>
</ul>
<p>java –&gt; apk –&gt; 发布（应用商店） –&gt; 使用apk一键安装使用<br>java –&gt;jar(环境) –&gt; 打包项目带上环境（镜像）—&gt;（Docker仓库：商店）—&gt;下载我们发布的镜像—直接运行即可！  </p>
<p><strong>Docker给以上的问题，提出了解决方案！</strong><br>Docker的思想就来自于集装箱！<br>隔离：Docker核心思想！打包装箱！每个箱子是互相隔离的。</p>
<h2 id="2、docker历史"><a href="#2、docker历史" class="headerlink" title="2、docker历史"></a>2、docker历史</h2><p>2010年，几个搞IT的年轻人，就在美国成立了一家公司<strong>dotcloud</strong>做一些pass的云计算服务！<br>转向方向 –&gt; 2013年docker开源<br>2014年4月9日，Docker1.0发布<br>docker 能火的原因：容器技术出来之前都是使用虚拟机技术，但是内存占用很大，而docker是轻量级！！！<br>虚拟机：通过window安装一个VMware，通过这个软件可以虚拟出一个或者多台电脑<br>虚拟机也是属于虚拟化技术，Docker也是容器技术，也是一种虚拟化技术</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vm：隔离，需要开启多个虚拟机！linux centos原生镜像（一个电脑！）需要几个G内存空间，开启需要几分钟！</span><br><span class="line">docker：隔离，镜像（最核心的环境4m内存）十分的小巧，运行镜像就可以了！小巧！几个M或KB的内存空间，秒级启动！</span><br></pre></td></tr></table></figure>

<blockquote>
<p>聊聊docker</p>
</blockquote>
<p>Docker是基于Go语言开发的！开源项目！<br>官网：<a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a><br>文档地址（很详细）：<a target="_blank" rel="noopener" href="https://docs.docker.com/">https://docs.docker.com/</a><br>Doker镜像仓库地址：<a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<h2 id="3、docker能做什么"><a href="#3、docker能做什么" class="headerlink" title="3、docker能做什么"></a>3、docker能做什么</h2><blockquote>
<p>之前的虚拟机技术</p>
</blockquote>
<img src="/post/6782be63/1677857891414-3274d399-87c8-4403-854b-e2a972d29bd8.png" class="" title="image.png">
<p>缺点：<br>1、资源占用很多<br>2、冗余步骤多<br>3、启动很慢</p>
<blockquote>
<p>容器化技术</p>
</blockquote>
<p>容器化技术不是模拟的完整的操作系统</p>
<img src="/post/6782be63/1677857985468-558e266a-4210-4b7f-917e-9b320ba77702.png" class="" title="image.png">
<p>比较Docker和虚拟机技术的不同：</p>
<ul>
<li>传统虚拟机，虚拟出一条硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件。</li>
<li>容器内的应用直接运行在宿主机的内核中，容器是没有自己的内核的，也没有虚拟我们的硬件，所以就轻便了。</li>
<li>每个容器间是互相隔离，每个容器内都有一个属于自己的文件系统，互不影响。</li>
</ul>
<blockquote>
<p>Devops（开发、运维）</p>
</blockquote>
<p><strong>应用更快速的交付和部署</strong><br>传统：一堆帮助文档，安装程序!<br>Docker：打包镜像发布测试，一键运行!<br><strong>更便捷的升级和扩缩容</strong><br>使用了Docker之后，我们部署应用就和搭积木一样！<br>项目打包为一个镜像，扩展服务器A！服务器B!<br><strong>更简单的系统运维</strong><br>在容器化之后，我们的开发，测试环境都是高度一致的。<br><strong>更高效的计算资源利用</strong><br>Docker是内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例！服务器的性能可以被压榨到极致。<br>只要学不死，就往死里学！</p>
<h1 id="第二章、Docker安装"><a href="#第二章、Docker安装" class="headerlink" title="第二章、Docker安装"></a>第二章、Docker安装</h1><h2 id="1、Docker的基本组成"><a href="#1、Docker的基本组成" class="headerlink" title="1、Docker的基本组成"></a>1、Docker的基本组成</h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1677858863410-d962995b-0eec-46c9-928f-e434a0ff72cc.png#averageHue=%23ebf2e8&clientId=ud079f3f6-e2bc-4&from=paste&height=363&id=u797f20a1&name=image.png&originHeight=454&originWidth=858&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=163102&status=done&style=none&taskId=u6a3a8caf-6a70-4051-a56a-1964a9b11eb&title=&width=686.4" alt="image.png"><br><strong>镜像（image）：</strong><br>docker镜像就好比是一个模板，可以通过这个模板来创建容器服务，tomcat镜像===&gt;run==&gt;tomcat01容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中的）。<br><strong>容器（container）：</strong><br>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。<br>启动，停止，删除，基本命令！<br>目前就可以把这个容器理解为就是一个简易的linux系统<br><strong>仓库（repository）：</strong><br>仓库就是存放镜像的地方！<br>仓库分为公有仓库和私有仓库！<br>Docker Hub（默认是国外的）阿里云.…都有容器服务器（配置镜像加速！）</p>
<h2 id="2、linux安装docker"><a href="#2、linux安装docker" class="headerlink" title="2、linux安装docker"></a>2、linux安装docker</h2><blockquote>
<p>环境准备</p>
</blockquote>
<ol>
<li>需要会一点点的Linux的基础</li>
<li>CentOS7</li>
<li>我们使用Xshell连接远程服务器进行操作（最好使用云服务器，方便）</li>
</ol>
<p>环境查看<br>命令： cd /etc/os-release</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.10</span><span class="number">.0</span>-<span class="number">1160.83</span><span class="number">.1</span>.el7.x86_64</span><br><span class="line">[root<span class="meta">@rww</span> /]# cat /etc/os-release </span><br><span class="line">NAME=<span class="string">&quot;CentOS Linux&quot;</span></span><br><span class="line">VERSION=<span class="string">&quot;7 (Core)&quot;</span></span><br><span class="line">ID=<span class="string">&quot;centos&quot;</span></span><br><span class="line">ID_LIKE=<span class="string">&quot;rhel fedora&quot;</span></span><br><span class="line">VERSION_ID=<span class="string">&quot;7&quot;</span></span><br><span class="line">PRETTY_NAME=<span class="string">&quot;CentOS Linux 7 (Core)&quot;</span></span><br><span class="line">ANSI_COLOR=<span class="string">&quot;0;31&quot;</span></span><br><span class="line">CPE_NAME=<span class="string">&quot;cpe:/o:centos:centos:7&quot;</span></span><br><span class="line">HOME_URL=<span class="string">&quot;https://www.centos.org/&quot;</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">&quot;https://bugs.centos.org/&quot;</span></span><br><span class="line"></span><br><span class="line">CENTOS_MANTISBT_PROJECT=<span class="string">&quot;CentOS-7&quot;</span></span><br><span class="line">CENTOS_MANTISBT_PROJECT_VERSION=<span class="string">&quot;7&quot;</span></span><br><span class="line">REDHAT_SUPPORT_PRODUCT=<span class="string">&quot;centos&quot;</span></span><br><span class="line">REDHAT_SUPPORT_PRODUCT_VERSION=<span class="string">&quot;7&quot;</span></span><br></pre></td></tr></table></figure>

<p>帮助文档：首页 <a target="_blank" rel="noopener" href="https://docs.docker.com/">https://docs.docker.com/</a> （<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/%EF%BC%89docker">https://docs.docker.com/engine/install/centos/）docker</a> 命令</p>
<blockquote>
<p>安装</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载旧的版本：</span></span><br><span class="line">yum remove docker</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装新版本</span></span><br><span class="line">yum install -y yum-utils</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置镜像仓库</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 国外</span></span></span><br><span class="line">1. yum-config-manager \</span><br><span class="line">        --add-repo \</span><br><span class="line">        https://download.docker.com/linux/centos/docker-ce.repo # 默认是从国外的。</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#国内</span></span></span><br><span class="line">2.yum-config-manager \</span><br><span class="line">      --add-repo \</span><br><span class="line">      http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo ####推荐使用阿里云的。</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装容器之前，更新yum软件包索引：</span> </span><br><span class="line">yum makecache fast</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装容器相关：er-ce（社区版）docker-ee（企业版）：</span></span><br><span class="line">yum install docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动docker命令:</span></span><br><span class="line">systemctl start docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看是否安装成功：</span></span><br><span class="line">docker version</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>镜像文件</p>
<img src="/post/6782be63/1678242124168-18112874-bea8-4d1d-a86c-d610935a7565.png" class="" title="image.png">

<blockquote>
<p>卸载</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载依赖：</span> </span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除资源：</span></span><br><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/lib/containerd</span><br><span class="line">/var/lib/docker docker的默认工作路径</span><br></pre></td></tr></table></figure>

<blockquote>
<p>测试hello-world</p>
</blockquote>
<p>docker run hello-world</p>
<blockquote>
<p>配置阿里云加速镜像</p>
</blockquote>
<img src="/post/6782be63/1678242729538-c071989e-f6ed-459d-a7c6-7d04340bc4e3.png" class="" title="image.png">

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://ui7yw1xi.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<blockquote>
<p>hello-world的测试运行流程</p>
</blockquote>
<p>docker run hello-world<br>hello-world流程</p>
<img src="/post/6782be63/1678242889538-e58f640d-78dc-4d51-a9c8-a72e63daa6cc.png" class="" title="image.png">

<blockquote>
<p>底层原理    </p>
</blockquote>
<h3 id="2-1、docker的底层原理"><a href="#2-1、docker的底层原理" class="headerlink" title="2.1、docker的底层原理"></a>2.1、docker的底层原理</h3><h4 id="2-1-1、Docker是怎么工作的？"><a href="#2-1-1、Docker是怎么工作的？" class="headerlink" title="2.1.1、Docker是怎么工作的？"></a>2.1.1、Docker是怎么工作的？</h4><p>Docker 是一个Client-Server结构的系统，Docker的守护进程运行在主机上。通过Socket从客户端访问！<br>DockerServer 接收到Docker-Client的指令，就会执行这个命令！<br>流程图：</p>
<img src="/post/6782be63/1678243109270-e75456c5-40bc-4714-bc95-68e25227b108.png" class="" title="image.png">

<h4 id="2-1-2、docker为什么比vm快"><a href="#2-1-2、docker为什么比vm快" class="headerlink" title="2.1.2、docker为什么比vm快"></a>2.1.2、docker为什么比vm快</h4><ol>
<li>Docker有着比虚拟机更少的抽象层。</li>
<li>docker利用的是宿主机的内核，vm需要是Guest OS</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678249997310-4972887d-a6bb-4077-9d14-8d466ae90d14.png#averageHue=%23d9e5d3&clientId=ua9213d0e-1d02-4&from=paste&height=369&id=u45d6e45e&name=image.png&originHeight=368&originWidth=607&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=122554&status=done&style=none&taskId=u8b20790d-254a-4c21-b191-df9e1eccaa1&title=&width=609" alt="image.png"><br>新建一个容器的时候，docker不需要像虚拟机一样重新加载一个操作系统内核，避免引导。<br>虚拟机是加载GuestOS，分钟级别的，而docker是利用宿主机的操作系统，省略了这个复杂的过程，秒级！</p>
<h1 id="第三章、Docker的常用命令"><a href="#第三章、Docker的常用命令" class="headerlink" title="第三章、Docker的常用命令"></a>第三章、Docker的常用命令</h1><h2 id="1、帮助命令"><a href="#1、帮助命令" class="headerlink" title="1、帮助命令"></a>1、帮助命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version        # 显示docker的版本信息</span><br><span class="line">docker info              # 显示docker的系统信息，包括镜像和容器的数量</span><br><span class="line">docker 命令 --help         # 帮助命令</span><br></pre></td></tr></table></figure>

<p>帮助文档的地址：<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<h2 id="2、镜像命令"><a href="#2、镜像命令" class="headerlink" title="2、镜像命令"></a>2、镜像命令</h2><h3 id="2-1、dicker-images"><a href="#2-1、dicker-images" class="headerlink" title="2.1、dicker images"></a>2.1、dicker images</h3><p>查看所有本地的主机上的镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@rww ~]# docker images</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   17 months ago   13.3kB</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解释</span></span><br><span class="line">REPOSITORY    镜像的仓库源</span><br><span class="line">TAG            镜像的标签</span><br><span class="line">IMAGE ID    镜像的id</span><br><span class="line">CREATED        镜像的创建时间</span><br><span class="line">SIZE        镜像的大小</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令参数可选项</span></span><br><span class="line"> -a, --all         # 显示所有镜像 (docker images -a)</span><br><span class="line"> -q, --quiet       # 仅显示镜像id (docker images -q)</span><br></pre></td></tr></table></figure>

<h3 id="2-2、docker-search"><a href="#2-2、docker-search" class="headerlink" title="2.2、docker search"></a>2.2、docker search</h3><p>搜索镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@rww ~]# docker search mysql</span><br><span class="line">NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">mysql                           MySQL is a widely used, open-source relation…   13905     [OK]       </span><br><span class="line">mariadb                         MariaDB Server is a high performing open sou…   5298      [OK]       </span><br><span class="line">percona                         Percona Server is a fork of the MySQL relati…   600       [OK]       </span><br><span class="line">phpmyadmin                      phpMyAdmin - A web interface for MySQL and M…   752       [OK]       </span><br><span class="line">circleci/mysql                  MySQL is a widely used, open-source relation…   29                   </span><br><span class="line">bitnami/mysql                   Bitnami MySQL Docker Image                      80                   [Ok]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解释</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令参数可选项 (通过搜索来过滤)</span></span><br><span class="line">--filter=STARS=3000     # 搜索出来的镜像就是stars大于3000的</span><br><span class="line">[root@rww ~]# docker search mysql --filter=STARS=3000</span><br><span class="line">NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">mysql     MySQL is a widely used, open-source relation…   12941     [OK]</span><br><span class="line">mariadb   MariaDB Server is a high performing open sou…   4957      [OK]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-3、docker-pull"><a href="#2-3、docker-pull" class="headerlink" title="2.3、docker pull"></a>2.3、docker pull</h3><p>下载镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载镜像：docker pull 镜像名[:tag]</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker pull mysql</span><br><span class="line">Using default tag: latest            # 如果不写tag，默认就是latest，最新的版本</span><br><span class="line">latest: Pulling from library/mysql</span><br><span class="line">72a69066d2fe: Pull complete            # 分层下载，docker image的核心，联合文件下载</span><br><span class="line">93619dbc5b36: Pull complete</span><br><span class="line">99da31dd6142: Pull complete</span><br><span class="line">626033c43d70: Pull complete</span><br><span class="line">37d5d7efb64e: Pull complete</span><br><span class="line">ac563158d721: Pull complete</span><br><span class="line">d2ba16033dad: Pull complete</span><br><span class="line">688ba7d5c01a: Pull complete</span><br><span class="line">00e060b6d11d: Pull complete</span><br><span class="line">1c04857f594f: Pull complete</span><br><span class="line">4d7cfa90e6ea: Pull complete</span><br><span class="line">e0431212d27d: Pull complete</span><br><span class="line">Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709 #签名</span><br><span class="line">Status: Downloaded newer image for mysql:latest</span><br><span class="line">docker.io/library/mysql:latest        # 真实地址</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">两个命令是等价的</span></span><br><span class="line">docker pull mysql</span><br><span class="line">docker pull docker.io/library/mysql:latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定版本下载</span></span><br><span class="line"></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker pull mysql:5.7</span><br><span class="line">5.7: Pulling from library/mysql</span><br><span class="line">72a69066d2fe: Already exists        # 联合文件下载，已经存在的资源可以共用</span><br><span class="line">93619dbc5b36: Already exists</span><br><span class="line">99da31dd6142: Already exists</span><br><span class="line">626033c43d70: Already exists</span><br><span class="line">37d5d7efb64e: Already exists</span><br><span class="line">ac563158d721: Already exists</span><br><span class="line">d2ba16033dad: Already exists</span><br><span class="line">0ceb82207cd7: Pull complete</span><br><span class="line">37f2405cae96: Pull complete</span><br><span class="line">e2482e017e53: Pull complete</span><br><span class="line">70deed891d42: Pull complete</span><br><span class="line">Digest: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94</span><br><span class="line">Status: Downloaded newer image for mysql:5.7</span><br><span class="line">docker.io/library/mysql:5.7</span><br></pre></td></tr></table></figure>

<h3 id="2-4、docker-rmi"><a href="#2-4、docker-rmi" class="headerlink" title="2.4、docker rmi"></a>2.4、docker rmi</h3><p>删除镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker rmi -f 镜像id                    # 删除指定的镜像</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker rmi -f 镜像id 镜像id 镜像id    # 删除多个镜像（空格分隔）</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker rmi -f $(docker images -aq)    # 删除全部的镜像</span><br></pre></td></tr></table></figure>

<h2 id="3、容器命令"><a href="#3、容器命令" class="headerlink" title="3、容器命令"></a>3、容器命令</h2><p>说明：我们有了镜像才可以创建容器，linux，下载一个centos 镜像来测试学习。</p>
<ol>
<li>docker pull centos</li>
</ol>
<h3 id="3-1、新建容器并启动"><a href="#3-1、新建容器并启动" class="headerlink" title="3.1、新建容器并启动"></a>3.1、新建容器并启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数说明</span></span><br><span class="line">--name=&quot;name&quot;        容器名字：用来区分容器</span><br><span class="line">-d                    后台方式运行：相当于nohup</span><br><span class="line">-it                    使用交互式运行：进入容器查看内容</span><br><span class="line">-p                    指定容器的端口（四种方式）小写字母p</span><br><span class="line">    -p ip:主机端口：容器端口</span><br><span class="line">    -p 主机端口：容器端口</span><br><span class="line">    -p 容器端口</span><br><span class="line">    容器端口</span><br><span class="line">-P                     随机指定端口（大写字母P）</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试：启动并进入容器</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@526c31d2c298 /]# ls        # 查看容器内的centos（基础版本，很多命令都是不完善的）</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">从容器中退回到主机</span></span><br><span class="line">[root@526c31d2c298 /]# exit</span><br><span class="line">exit</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ /]# ls</span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var  www</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678256461360-35ed58ca-8934-4cde-9684-ae02801563d1.png#averageHue=%230b0906&clientId=u7ff454a0-4018-4&from=paste&height=143&id=u257eae97&name=image.png&originHeight=179&originWidth=690&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=23897&status=done&style=none&taskId=u407c758a-ce59-46a7-b265-ee7f64d1072&title=&width=552" alt="image.png"></p>
<h3 id="3-2、列出所有运行的容器"><a href="#3-2、列出所有运行的容器" class="headerlink" title="3.2、列出所有运行的容器"></a>3.2、列出所有运行的容器</h3><p><strong>docker ps</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    # 列出当前正在运行的容器</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令参数可选项</span></span><br><span class="line">-a        # 列出当前正在运行的容器+历史运行过的容器</span><br><span class="line">-n=?    # 显示最近创建的容器（可以指定显示几条，比如-n=1）</span><br><span class="line">-q        # 只显示容器的编号</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ /]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ /]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES</span><br><span class="line">526c31d2c298   centos         &quot;/bin/bash&quot;   4 minutes ago   Exited (0) 2 minutes ago             optimistic_allen</span><br><span class="line">ce0eb11fbf8a   feb5d9fea6a5   &quot;/hello&quot;      4 hours ago     Exited (0) 4 hours ago               keen_ellis</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ /]# docker ps -a -n=1</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                     PORTS     NAMES</span><br><span class="line">526c31d2c298   centos    &quot;/bin/bash&quot;   5 minutes ago   Exited (0) 3 minutes ago             optimistic_allen</span><br></pre></td></tr></table></figure>

<h3 id="3-3、退出容器"><a href="#3-3、退出容器" class="headerlink" title="3.3、退出容器"></a>3.3、退出容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exit        # 容器直接停止，并退出</span><br><span class="line">ctrl+P+Q    # 容器不停止，退出</span><br><span class="line">[root@rww ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@c5d61aa9d7df /]# [root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">c5d61aa9d7df   centos    &quot;/bin/bash&quot;   56 seconds ago   Up 55 seconds             kind_clarke</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]#</span><br></pre></td></tr></table></figure>

<h3 id="3-4、删除容器"><a href="#3-4、删除容器" class="headerlink" title="3.4、删除容器"></a>3.4、删除容器</h3><p>**docker rm 容器id **</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除容器（不能删除正在运行的容器）如果要强制删除：docker <span class="built_in">rm</span> -f 容器<span class="built_in">id</span></span></span><br><span class="line">docker rm -f $(docker ps -aq)        # 删除全部容器</span><br><span class="line">docker ps -a -q|xargs docker rm        # 删除所有容器</span><br></pre></td></tr></table></figure>

<h3 id="3-5、启动和停止容器的操作"><a href="#3-5、启动和停止容器的操作" class="headerlink" title="3.5、启动和停止容器的操作"></a>3.5、启动和停止容器的操作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器id        # 启动容器</span><br><span class="line">docker restart 容器id    # 重启容器</span><br><span class="line">docker stop 容器id        # 停止当前正在运行的容器</span><br><span class="line">docker kill 容器id        # 强制停止当前容器</span><br></pre></td></tr></table></figure>

<h2 id="4、其他常用命令"><a href="#4、其他常用命令" class="headerlink" title="4、其他常用命令"></a>4、其他常用命令</h2><h3 id="4-1、后台启动命令"><a href="#4-1、后台启动命令" class="headerlink" title="4.1、后台启动命令"></a>4.1、后台启动命令</h3><p><strong>docker run -d 镜像名</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d centos</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">问题：docker ps发现centos停止了</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">常见的坑：docker容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">比如：nginx，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2、查看日志"><a href="#4-2、查看日志" class="headerlink" title="4.2、查看日志"></a>4.2、查看日志</h3><p><strong>docker logs -tf –tail 容器id</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自己编写一段shell脚本</span></span><br><span class="line">docker run -d centos /bin/sh -c &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker logs -tf  容器id</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker logs -tf --tail 10  容器id</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示日志</span></span><br><span class="line">-tf                        # 显示日志</span><br><span class="line">--tail number    # 要显示的日志条数</span><br></pre></td></tr></table></figure>

<h3 id="4-3、查看容器中进程的信息"><a href="#4-3、查看容器中进程的信息" class="headerlink" title="4.3、查看容器中进程的信息"></a>4.3、查看容器中进程的信息</h3><p> **docker top 容器id **</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker top 88d23bcbe1f2</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                21212               21193               0                   16:23               ?                   00:00:00            </span><br><span class="line">root                21600               21212               0                   16:29               ?                   00:00:00</span><br></pre></td></tr></table></figure>

<h3 id="4-4、查看镜像的元数据"><a href="#4-4、查看镜像的元数据" class="headerlink" title="4.4、查看镜像的元数据"></a>4.4、查看镜像的元数据</h3><p><strong>docker inspect 容器id</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">[root@rww ~]# docker inspect 9999085a2896</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2023-03-08T07:18:08.073484373Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/bin/sh&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;-c&quot;,</span><br><span class="line">            &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 4277,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2023-03-08T07:18:08.341938866Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5/9999085a28968d4497d97d514b4c540ecb4955e385a0ec351cef31f141fc6ec5-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/affectionate_swartz&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: null,</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                41,</span><br><span class="line">                103</span><br><span class="line">            ],</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: [],</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/4ceae0881f0ba72d748aa0e0ec8f36e63a9914a17a893d30b7c521050d68d159-init/diff:/var/lib/docker/overlay2/b74917250d5ecc92d059d6c348512b415f5f8188f239b850f027b43074bbfa19/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/4ceae0881f0ba72d748aa0e0ec8f36e63a9914a17a893d30b7c521050d68d159/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/4ceae0881f0ba72d748aa0e0ec8f36e63a9914a17a893d30b7c521050d68d159/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/4ceae0881f0ba72d748aa0e0ec8f36e63a9914a17a893d30b7c521050d68d159/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;9999085a2896&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/sh&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;while true;do echo kuangshen;sleep 1;done&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class="line">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class="line">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class="line">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class="line">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;5fc463b35ae2831d4523ef0f7a951d52a760a06daf1314aa87bc00dee1c57414&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/5fc463b35ae2&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;e9f8bc29660e9d12c5d338f5fad4ff462082b4938de517203213f4783bbf511a&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;581ee08705f179abd3a0fe1866f7c9a6187786329b446b43de3c942dd0461c89&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;e9f8bc29660e9d12c5d338f5fad4ff462082b4938de517203213f4783bbf511a&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;172.17.0.2&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:02&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@rww ~]# </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-5、进入当前正在进行的容器"><a href="#4-5、进入当前正在进行的容器" class="headerlink" title="4.5、进入当前正在进行的容器"></a>4.5、进入当前正在进行的容器</h3><p><strong>docker exec -it 容器id  /bin/bash</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">测试</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">方式一</span></span><br><span class="line">[root@rww ~]# docker exec -it 9999085a2896 /bin/bash</span><br><span class="line">[root@9999085a2896 /]# ls</span><br><span class="line">bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var</span><br><span class="line">dev  home  lib64  media       opt  root  sbin  sys  usr</span><br><span class="line">[root@9999085a2896 /]# ps -ef</span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class="line">root         1     0  0 07:18 ?        00:00:00 /bin/sh -c while true;do echo kuangshen;sleep 1;done</span><br><span class="line">root       490     0  0 07:26 pts/0    00:00:00 /bin/bash</span><br><span class="line">root       536     0  0 07:26 pts/1    00:00:00 /bin/bash</span><br><span class="line">root       574     1  0 07:26 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/</span><br><span class="line">root       575   536  0 07:27 pts/1    00:00:00 ps -ef</span><br><span class="line">[root@9999085a2896 /]# </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">方式二</span></span><br><span class="line">docker attach 容器id</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker attach 88d23bcbe1f2</span><br><span class="line">正在执行当前的代码...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker <span class="built_in">exec</span>        <span class="comment"># 进入容器后开启一个新的终端，可以再里面操作（常用）</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker attach        <span class="comment"># 进入容器正在执行的终端，不会启动新的进程。</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-6、从容器内拷贝到主机上"><a href="#4-6、从容器内拷贝到主机上" class="headerlink" title="4.6、从容器内拷贝到主机上"></a>4.6、从容器内拷贝到主机上</h3><p><strong>docker cp 容器id:容器内路径 目的主机的路径</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# ll</span><br><span class="line">total 0</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker run -it centos /bin/bash</span><br><span class="line">[root@6eda31ad7987 /]# [root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">6eda31ad7987   centos    &quot;/bin/bash&quot;   17 seconds ago   Up 16 seconds             stoic_kepler</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入到容器内部</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker attach 6eda31ad7987</span><br><span class="line">[root@6eda31ad7987 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@6eda31ad7987 /]# cd /home/</span><br><span class="line">[root@6eda31ad7987 home]# ls</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在容器的/home路径下创建test.java文件</span></span><br><span class="line">[root@6eda31ad7987 home]# touch test.java</span><br><span class="line">[root@6eda31ad7987 home]# ls</span><br><span class="line">test.java</span><br><span class="line">[root@6eda31ad7987 home]# exit</span><br><span class="line">exit</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS                      PORTS     NAMES</span><br><span class="line">6eda31ad7987   centos    &quot;/bin/bash&quot;   About a minute ago   Exited (0) 28 seconds ago             stoic_kepler</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将文件拷贝出来到主机上（在主机上执行该命令）</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# docker cp 6eda31ad7987:/home/test.java /home</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ home]# ls</span><br><span class="line">test.java</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现，自动同步（容器内的/home路径和主机上的/home路径打通）</span></span><br></pre></td></tr></table></figure>

<h2 id="5、小结"><a href="#5、小结" class="headerlink" title="5、小结"></a>5、小结</h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678263005864-811028f0-dd1b-4389-8324-7af420652d25.png#averageHue=%23286fa3&clientId=u7ff454a0-4018-4&from=paste&id=u946d98b2&name=image.png&originHeight=733&originWidth=1046&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=345548&status=done&style=none&taskId=u8cb5bab6-fb95-4daa-b071-6db32220a89&title=" alt="image.png"></p>
<h2 id="6、练习"><a href="#6、练习" class="headerlink" title="6、练习"></a>6、练习</h2><h3 id="6-1、docker安装nginx"><a href="#6-1、docker安装nginx" class="headerlink" title="6.1、docker安装nginx"></a>6.1、docker安装nginx</h3><ol>
<li>搜索镜像：docker search nginx (建议去dockerHub上去搜索)</li>
<li>下载镜像：docker pull nginx</li>
<li>启动nginx</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-d 后台运行</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--name=<span class="string">&quot;nginx01&quot;</span>    给容器命名</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p 宿主机端口:容器内部端口</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker run -d --name=&quot;nginx-1&quot; -p 3344:80 nginx</span><br><span class="line">6e02190a50bc8d79653ffa88f6b5c143d79c5ac3257d5d5ed6a01247980fb48a</span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                                   NAMES</span><br><span class="line">6e02190a50bc   nginx     &quot;/docker-entrypoint.…&quot;   18 seconds ago   Up 17 seconds   0.0.0.0:3344-&gt;80/tcp, :::3344-&gt;80/tcp   nginx-1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入容器</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# docker exec -it a1e130aa184d /bin/bash</span><br><span class="line">root@a1e130aa184d:/# whereis nginx</span><br><span class="line">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx</span><br><span class="line">root@a1e130aa184d:/# cd /etc/nginx/</span><br><span class="line">root@a1e130aa184d:/etc/nginx# ls</span><br><span class="line">conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>本机测试</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# curl localhost:3344</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>端口暴露</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678265179235-8049beb7-e639-4419-a684-b43161fe182a.png#averageHue=%23f5f5f5&clientId=u7ff454a0-4018-4&from=paste&id=u7fdb8e5b&name=image.png&originHeight=747&originWidth=969&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=100285&status=done&style=none&taskId=ucf370e99-3399-4bdf-94a9-c648bb152ff&title=" alt="image.png"><br>思考问题：我们每次改动nginx配置文件，都需要进入容器内部？十分的麻烦，我要是可以在容器外部提供一个映射路径，达到在容器外修改文件名，容器内部就可以自动修改？-v 数据卷</p>
<h3 id="6-2、docker安装tomcat"><a href="#6-2、docker安装tomcat" class="headerlink" title="6.2、docker安装tomcat"></a>6.2、docker安装tomcat</h3><h1 id="我们之前的启动都是后台，停止了容器之后，容器还是可以查到docker-run-it-–rm，一般用来测试，用完就删除。"><a href="#我们之前的启动都是后台，停止了容器之后，容器还是可以查到docker-run-it-–rm，一般用来测试，用完就删除。" class="headerlink" title="我们之前的启动都是后台，停止了容器之后，容器还是可以查到docker run -it –rm，一般用来测试，用完就删除。"></a>我们之前的启动都是后台，停止了容器之后，容器还是可以查到docker run -it –rm，一般用来测试，用完就删除。</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载</span></span><br><span class="line">docker pull tomcat</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动运行</span></span><br><span class="line">docker run -d --name=&quot;tomcat01&quot; -p 3355:8080 tomcat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试访问没有问题，但是找不到资源</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入容器，有一个webapps文件夹和webapps.dist文件夹</span></span><br><span class="line">docker exec -it tomcat01 /bin/bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">webapps文件夹下没有资源，资源都在webapp.dist文件夹下</span></span><br><span class="line">root@35eb825661e0:/usr/local/tomcat# ls</span><br><span class="line">BUILDING.txt  CONTRIBUTING.md  LICENSE  NOTICE  README.md  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  native-jni-lib  temp  webapps  webapps.dist  work</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">发现问题：（阿里云镜像的原因：默认是最小的镜像，所有不必要的都剔除掉）保证最小可运行的环境</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、Linux命令少了。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、没有webapps文件夹。</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">没有webapps文件夹，发现有一个webapps.dist文件夹，资源在webapps.dist文件夹下；</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">把webapps.dist文件夹下的文件复制到webapps文件夹下，就可以访问成功。</span></span><br><span class="line">root@35eb825661e0:/usr/local/tomcat# cp -r webapps.dist/* webapps</span><br></pre></td></tr></table></figure>

<p>思考问题：我们以后要部署项目，如果每次都要进入容器是不是十分麻烦？我要是可以在容器外部提供一个映射路径，webapps，我们在外部放置项目，就自动同步到内部就好了（数据卷）</p>
<h3 id="6-3、部署ES-kibana"><a href="#6-3、部署ES-kibana" class="headerlink" title="6.3、部署ES + kibana"></a>6.3、部署ES + kibana</h3><ol>
<li><h1 id="es暴露的端口很多！"><a href="#es暴露的端口很多！" class="headerlink" title="es暴露的端口很多！"></a>es暴露的端口很多！</h1></li>
<li><h1 id="es十分的耗内存！"><a href="#es十分的耗内存！" class="headerlink" title="es十分的耗内存！"></a>es十分的耗内存！</h1></li>
<li><h1 id="es的数据一般需要放置到安全目录！挂载"><a href="#es的数据一般需要放置到安全目录！挂载" class="headerlink" title="es的数据一般需要放置到安全目录！挂载"></a>es的数据一般需要放置到安全目录！挂载</h1></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下载启动elasticsearch</span></span><br><span class="line">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.6.2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动了linux就卡住了，es是十分耗内存的（1核2G）</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看cpu的状态</span></span><br><span class="line">docker stats </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">测试一下es是成功的</span></span><br><span class="line">[root@iZbp13qr3mm4ucsjumrlgqZ ~]# curl localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;7ed338b2a87c&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;docker-cluster&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;enAVpI1oQoW4tLmafuWcnw&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;7.6.2&quot;,</span><br><span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">    &quot;build_type&quot; : &quot;docker&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;ef48eb35cf30adf4db14086e8aabd07ef6fb113f&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2020-03-26T06:34:37.794943Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;8.4.0&quot;,</span><br><span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,</span><br><span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">赶紧关闭，增加内存的限制，修改配置文件-e环境配置修改</span></span><br><span class="line">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot; elasticsearch:7.6.2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以访问成功；查看cpu状态</span></span><br></pre></td></tr></table></figure>

<p>思考：使用kibana连接es？思考网络如何才能连接过去！（没学过，暂时摆~）<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678271218948-c1a93e2a-ed9d-4b69-bdb2-96f60e1cc752.png#averageHue=%23f7f7f7&clientId=u7ff454a0-4018-4&from=paste&id=u64c24ce7&name=image.png&originHeight=502&originWidth=1035&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=64582&status=done&style=none&taskId=ub67fc6e6-1512-41b4-a414-9ae7ac41394&title=" alt="image.png"></p>
<h2 id="7、可视化"><a href="#7、可视化" class="headerlink" title="7、可视化"></a>7、可视化</h2><ul>
<li>portainer（先用这个）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<ul>
<li>Rancher（CI/CD时再用这个）</li>
</ul>
<h3 id="7-1、什么是portainer？"><a href="#7-1、什么是portainer？" class="headerlink" title="7.1、什么是portainer？"></a>7.1、什么是portainer？</h3><p>Docker图形化界面管理工具！提供一个后台面板供我们操作！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动运行</span></span><br><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<p>访问：<a target="_blank" rel="noopener" href="http://8.130.14.73:8078/#/init/admin">http://8.130.14.73:8078</a><br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678271748378-e6e1e824-f6c6-473b-a4ac-ce4c72b612ea.png#averageHue=%23faf9f9&clientId=u7ff454a0-4018-4&from=paste&id=u5aff57de&name=image.png&originHeight=476&originWidth=762&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=36954&status=done&style=none&taskId=u36514733-ed4d-41ef-992b-48b11a5267b&title=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678272035462-2f8a3c07-ba35-4d90-bab5-d5e8f7022159.png#averageHue=%23fafaf9&clientId=u7ff454a0-4018-4&from=paste&id=u7e47ba07&name=image.png&originHeight=538&originWidth=1125&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=67896&status=done&style=none&taskId=u24d95230-8449-476c-9688-9b2c641df16&title=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678272042212-d26cf8d2-9645-405f-85bd-cec245607322.png#averageHue=%23f5f5f5&clientId=u7ff454a0-4018-4&from=paste&id=u2fef967e&name=image.png&originHeight=962&originWidth=1903&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=103529&status=done&style=none&taskId=u257e6760-d1d6-4789-b176-5983dcfa1b5&title=" alt="image.png"><br>选择本地的：Local<br>账号：admin<br>密码：ruan0220</p>
<h1 id="第四章、Docker镜像"><a href="#第四章、Docker镜像" class="headerlink" title="第四章、Docker镜像"></a>第四章、Docker镜像</h1><h2 id="1、镜像是什么"><a href="#1、镜像是什么" class="headerlink" title="1、镜像是什么"></a>1、镜像是什么</h2><p>镜像是一种<strong>轻量级、可执行</strong>的独立软件包，用来<strong>打包</strong>软件<strong>运行环境</strong>和基于运行环境开发的<strong>软件</strong>，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。<br>所有的应用，直接打包docker镜像，就可以直接跑起来！<br>如何得到镜像：</p>
<ul>
<li>从远程仓库下载</li>
<li>朋友拷贝给你</li>
<li>自己制作一个镜像DockerFile</li>
</ul>
<h2 id="2、Docker镜像加速原理"><a href="#2、Docker镜像加速原理" class="headerlink" title="2、Docker镜像加速原理"></a>2、Docker镜像加速原理</h2><h3 id="2-1、UnionFS（联合文件系统）"><a href="#2-1、UnionFS（联合文件系统）" class="headerlink" title="2.1、UnionFS（联合文件系统）"></a>2.1、UnionFS（联合文件系统）</h3><p>我们下载的时候看到的一层层就是这个！<br>UnionFS（联合文件系统）：Union文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下（unite several directories into a single virtual filesystem）。Union 文件系统是Docker 镜像的基础。镜像可以通过<strong>分层</strong>来进行<strong>继承</strong>，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。<br>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p>
<h3 id="2-2、Docker镜像加载原型"><a href="#2-2、Docker镜像加载原型" class="headerlink" title="2.2、Docker镜像加载原型"></a>2.2、Docker镜像加载原型</h3><p>docker的镜像实际上由一层一层的<strong>文件系统</strong>组成，这种层级的文件系统UnionFS。<br>bootfs（boot file system）主要包含bootloader和kernel，bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。<br>rootfs（root file system），在bootfs之上。包含的就是典型Linux系统中的/dev，/proc，/bin，/etc等标准目录和文件。<br>rootfs就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678272614544-0c5c74c8-d077-4885-9d4c-e73c4b2ce938.png#averageHue=%23d2c7bf&clientId=u7ff454a0-4018-4&from=paste&id=ua210be99&name=image.png&originHeight=302&originWidth=1058&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=214387&status=done&style=none&taskId=ud8a49c90-16df-4a3a-a6cd-d493e8c5813&title=" alt="image.png"><br>问题：平时我们安装进虚拟机的CentOS都是好几个G，为什么Docker这里才200M？<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678272628521-e65b173c-13c7-4d36-906e-02618fdfb0c3.png#averageHue=%232e2825&clientId=u7ff454a0-4018-4&from=paste&id=ub191c0c3&name=image.png&originHeight=130&originWidth=639&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=22656&status=done&style=none&taskId=u12c6de98-20ee-40c0-8f76-b32cb4b6531&title=" alt="image.png"><br>答案：对于一个精简的OS，rootfs可以很小，只需要包含最基本的命令，工具和程序库就可以了，因为底层直接用Host的kernel，自己只需要提供rootfs就可以了。<br>由此可见对于不同的linux发行版，bootfs基本是一致的，rootfs会有差别，因此不同的发行版可以公用bootfs。<br>（虚拟机是分钟级，容器是秒级！）</p>
<h2 id="3、分层理解"><a href="#3、分层理解" class="headerlink" title="3、分层理解"></a>3、分层理解</h2><h3 id="3-1、分层的镜像"><a href="#3-1、分层的镜像" class="headerlink" title="3.1、分层的镜像"></a>3.1、分层的镜像</h3><p>可以去下载一个镜像，注意观察下载的日志输出，可以看到是一层一层的在下载！<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678272902429-211109a2-888d-4da1-99db-c48e010230ae.png#averageHue=%23262321&clientId=u7ff454a0-4018-4&from=paste&id=u1f8e7682&name=image.png&originHeight=189&originWidth=655&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=24766&status=done&style=none&taskId=u5cd09561-c312-461f-878e-a6bb9c374d3&title=" alt="image.png"><br>思考：为什么Docker镜像要采用这种分层的结构呢？<br>最大的好处，我觉得莫过于是资源共享了！比如有多个镜像都从相同的Base镜像构建而来，那么宿主机只需在磁盘上保留一份base镜像，同时内存中也只需要加载一份base镜像，这样就可以为所有的容器服务了，而且镜像的每一层都可以被共享。<br>查看镜像分层的方式可以通过 docker image inspect命令！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">        // ......</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f&quot;,</span><br><span class="line">                &quot;sha256:9b24afeb7c2f21e50a686ead025823cd2c6e9730c013ca77ad5f115c079b57cb&quot;,</span><br><span class="line">                &quot;sha256:4b8e2801e0f956a4220c32e2c8b0a590e6f9bd2420ec65453685246b82766ea1&quot;,</span><br><span class="line">                &quot;sha256:529cdb636f61e95ab91a62a51526a84fd7314d6aab0d414040796150b4522372&quot;,</span><br><span class="line">                &quot;sha256:9975392591f2777d6bf4d9919ad1b2c9afa12f9a9b4d260f45025ec3cc9b18ed&quot;,</span><br><span class="line">                &quot;sha256:8e5669d8329116b8444b9bbb1663dda568ede12d3dbcce950199b582f6e94952&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Metadata&quot;: &#123;</span><br><span class="line">            &quot;LastTagTime&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>理解：</strong><br>所有的Docker 镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。<br>举一个简单的例子，假如基于Ubuntu Linux 16.04创建一个新的镜像，这就是新镜像的第一层；如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层；如果继续添加一个安全补丁，就会创建第三个镜像层。<br>该镜像当前已经包含3个镜像层，如下图所示（这只是一个用于演示的很简单的例子）。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678273271841-1c5b9c8f-b590-4dd2-a232-131b7bf4cb73.png#averageHue=%23f8f8f6&clientId=u7ff454a0-4018-4&from=paste&id=u3b4b494d&name=image.png&originHeight=383&originWidth=621&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=88584&status=done&style=none&taskId=uc114d58e-a283-4317-9c11-16b268f7184&title=" alt="image.png"><br>在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合，理解这一点非常重要。下图中举了一个简单的例子，每个镜像层包含3个文件，而镜像包含了来自两个镜像层的6个文件。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678273283087-bc413f40-1d8f-4a79-b6be-d6f6b8f8f573.png#averageHue=%23ebedea&clientId=u7ff454a0-4018-4&from=paste&id=ub719773e&name=image.png&originHeight=303&originWidth=613&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=62625&status=done&style=none&taskId=uad1e3d3b-f3e4-414b-a147-e04ccfdb200&title=" alt="image.png"><br>上图中的镜像层跟之前图中的略有区别，主要目的是便于展示文件。<br>下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层中的文件7是文件5的一个更新版本<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678273304217-41c19bc4-f8ce-4ec3-b5dd-cbd49ea17202.png#averageHue=%23f8f9f6&clientId=u7ff454a0-4018-4&from=paste&id=u9529dd4a&name=image.png&originHeight=457&originWidth=648&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=113089&status=done&style=none&taskId=u2bc790c3-0c3d-40d4-9c38-dc41770fa5f&title=" alt="image.png"><br>这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件。这样就使得文件的更新版本作为一个新镜像层添加到镜像当中。<br>Docker通过存储引擎（新版本采用快照机制）的方式来实现镜像层堆栈，并保证多镜像层对外展示为统一的文件系统。<br>Linux上可用的存储引擎有AUFS、Overlay2、Device Mapper、Btrfs以及ZFS。顾名思义，每种存储引擎都基于Linux中对应的文件系统或者块设备技术，并且每种存储引擎都有其独有的性能特点。<br>Docker在Windows 上仅支持 windowsfilter一种存储引擎，该引擎基于NTFS文件系统之上实现了分层和CoW[1]。<br>下图展示了与系统显示相同的三层镜像。所有镜像层堆叠并合并，对外提供统一的视图。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678273534016-f1d99c3c-0f9e-4446-adb1-6737b3fc3814.png#averageHue=%23e7e7e4&clientId=u7ff454a0-4018-4&from=paste&id=u8a0499b9&name=image.png&originHeight=223&originWidth=759&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=59922&status=done&style=none&taskId=u3fa150d0-f4cf-4cb7-ad93-80bdd491f02&title=" alt="image.png"></p>
<h3 id="3-2、特点"><a href="#3-2、特点" class="headerlink" title="3.2、特点"></a>3.2、特点</h3><p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部！<br>这一层就是我们通常说的容器层，容器之下的都叫镜像层！<br><img src="https://cdn.nlark.com/yuque/0/2023/png/26739307/1678273562566-f977c23b-5a3c-403f-8ee2-42748e299efe.png#averageHue=%23fdf9f3&clientId=u7ff454a0-4018-4&from=paste&id=uc3661ba3&name=image.png&originHeight=194&originWidth=1070&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=83796&status=done&style=none&taskId=u12a46439-224b-4959-b44c-17a7eea2ffd&title=" alt="image.png"></p>
<h2 id="4、commit镜像"><a href="#4、commit镜像" class="headerlink" title="4、commit镜像"></a>4、commit镜像</h2><h1 id="第五章、容器数据卷"><a href="#第五章、容器数据卷" class="headerlink" title="第五章、容器数据卷"></a>第五章、容器数据卷</h1><h1 id="第六章、Docker网络原理"><a href="#第六章、Docker网络原理" class="headerlink" title="第六章、Docker网络原理"></a>第六章、Docker网络原理</h1><h1 id="第七章、idea整合Docker"><a href="#第七章、idea整合Docker" class="headerlink" title="第七章、idea整合Docker"></a>第七章、idea整合Docker</h1><h1 id="第八章、Docker-Compose"><a href="#第八章、Docker-Compose" class="headerlink" title="第八章、Docker Compose"></a>第八章、Docker Compose</h1><h1 id="第九章、Docker-Swarm"><a href="#第九章、Docker-Swarm" class="headerlink" title="第九章、Docker Swarm"></a>第九章、Docker Swarm</h1><h1 id="第十章、CI-CDJenkins"><a href="#第十章、CI-CDJenkins" class="headerlink" title="第十章、CI\CDJenkins"></a>第十章、CI\CDJenkins</h1><h1 id="番外：命令汇总"><a href="#番外：命令汇总" class="headerlink" title="番外：命令汇总"></a>番外：命令汇总</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://febsnail.github.io">FebSnail</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://febsnail.github.io/post/6782be63.html">https://febsnail.github.io/post/6782be63.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://febsnail.github.io" target="_blank">二月蜗牛2</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/829a9c.html" title="Java学习2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java学习2</div></div></a></div><div class="next-post pull-right"><a href="/post/4a17b156.html" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">FebSnail</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%E3%80%81Docker%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第一章、Docker概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Docker%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%87%BA%E7%8E%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1、Docker为什么会出现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81docker%E5%8E%86%E5%8F%B2"><span class="toc-number">1.2.</span> <span class="toc-text">2、docker历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81docker%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-number">1.3.</span> <span class="toc-text">3、docker能做什么</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E3%80%81Docker%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">第二章、Docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">2.1.</span> <span class="toc-text">1、Docker的基本组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81linux%E5%AE%89%E8%A3%85docker"><span class="toc-number">2.2.</span> <span class="toc-text">2、linux安装docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81docker%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.1、docker的底层原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1%E3%80%81Docker%E6%98%AF%E6%80%8E%E4%B9%88%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%9F"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">2.1.1、Docker是怎么工作的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2%E3%80%81docker%E4%B8%BA%E4%BB%80%E4%B9%88%E6%AF%94vm%E5%BF%AB"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">2.1.2、docker为什么比vm快</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%E3%80%81Docker%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">第三章、Docker的常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.</span> <span class="toc-text">1、帮助命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">3.2.</span> <span class="toc-text">2、镜像命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81dicker-images"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.1、dicker images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81docker-search"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2、docker search</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81docker-pull"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.3、docker pull</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E3%80%81docker-rmi"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.4、docker rmi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.3.</span> <span class="toc-text">3、容器命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E6%96%B0%E5%BB%BA%E5%AE%B9%E5%99%A8%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1、新建容器并启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2、列出所有运行的容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81%E9%80%80%E5%87%BA%E5%AE%B9%E5%99%A8"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3、退出容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E3%80%81%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.4、删除容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E3%80%81%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.5、启动和停止容器的操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.4.</span> <span class="toc-text">4、其他常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E5%90%8E%E5%8F%B0%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.4.1.</span> <span class="toc-text">4.1、后台启动命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="toc-number">3.4.2.</span> <span class="toc-text">4.2、查看日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%BF%9B%E7%A8%8B%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">3.4.3.</span> <span class="toc-text">4.3、查看容器中进程的信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.4.</span> <span class="toc-text">4.4、查看镜像的元数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E3%80%81%E8%BF%9B%E5%85%A5%E5%BD%93%E5%89%8D%E6%AD%A3%E5%9C%A8%E8%BF%9B%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">3.4.5.</span> <span class="toc-text">4.5、进入当前正在进行的容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6%E3%80%81%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%86%85%E6%8B%B7%E8%B4%9D%E5%88%B0%E4%B8%BB%E6%9C%BA%E4%B8%8A"><span class="toc-number">3.4.6.</span> <span class="toc-text">4.6、从容器内拷贝到主机上</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">3.5.</span> <span class="toc-text">5、小结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E7%BB%83%E4%B9%A0"><span class="toc-number">3.6.</span> <span class="toc-text">6、练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E3%80%81docker%E5%AE%89%E8%A3%85nginx"><span class="toc-number">3.6.1.</span> <span class="toc-text">6.1、docker安装nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E3%80%81docker%E5%AE%89%E8%A3%85tomcat"><span class="toc-number">3.6.2.</span> <span class="toc-text">6.2、docker安装tomcat</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%88%91%E4%BB%AC%E4%B9%8B%E5%89%8D%E7%9A%84%E5%90%AF%E5%8A%A8%E9%83%BD%E6%98%AF%E5%90%8E%E5%8F%B0%EF%BC%8C%E5%81%9C%E6%AD%A2%E4%BA%86%E5%AE%B9%E5%99%A8%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%AE%B9%E5%99%A8%E8%BF%98%E6%98%AF%E5%8F%AF%E4%BB%A5%E6%9F%A5%E5%88%B0docker-run-it-%E2%80%93rm%EF%BC%8C%E4%B8%80%E8%88%AC%E7%94%A8%E6%9D%A5%E6%B5%8B%E8%AF%95%EF%BC%8C%E7%94%A8%E5%AE%8C%E5%B0%B1%E5%88%A0%E9%99%A4%E3%80%82"><span class="toc-number">4.</span> <span class="toc-text">我们之前的启动都是后台，停止了容器之后，容器还是可以查到docker run -it –rm，一般用来测试，用完就删除。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E3%80%81%E9%83%A8%E7%BD%B2ES-kibana"><span class="toc-number">4.0.1.</span> <span class="toc-text">6.3、部署ES + kibana</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#es%E6%9A%B4%E9%9C%B2%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%BE%88%E5%A4%9A%EF%BC%81"><span class="toc-number">5.</span> <span class="toc-text">es暴露的端口很多！</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#es%E5%8D%81%E5%88%86%E7%9A%84%E8%80%97%E5%86%85%E5%AD%98%EF%BC%81"><span class="toc-number">6.</span> <span class="toc-text">es十分的耗内存！</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#es%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%80%E8%88%AC%E9%9C%80%E8%A6%81%E6%94%BE%E7%BD%AE%E5%88%B0%E5%AE%89%E5%85%A8%E7%9B%AE%E5%BD%95%EF%BC%81%E6%8C%82%E8%BD%BD"><span class="toc-number">7.</span> <span class="toc-text">es的数据一般需要放置到安全目录！挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">7.1.</span> <span class="toc-text">7、可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFportainer%EF%BC%9F"><span class="toc-number">7.1.1.</span> <span class="toc-text">7.1、什么是portainer？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E3%80%81Docker%E9%95%9C%E5%83%8F"><span class="toc-number">8.</span> <span class="toc-text">第四章、Docker镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E9%95%9C%E5%83%8F%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">8.1.</span> <span class="toc-text">1、镜像是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%8E%9F%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">2、Docker镜像加速原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81UnionFS%EF%BC%88%E8%81%94%E5%90%88%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%89"><span class="toc-number">8.2.1.</span> <span class="toc-text">2.1、UnionFS（联合文件系统）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81Docker%E9%95%9C%E5%83%8F%E5%8A%A0%E8%BD%BD%E5%8E%9F%E5%9E%8B"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.2、Docker镜像加载原型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%88%86%E5%B1%82%E7%90%86%E8%A7%A3"><span class="toc-number">8.3.</span> <span class="toc-text">3、分层理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E5%88%86%E5%B1%82%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">8.3.1.</span> <span class="toc-text">3.1、分层的镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81%E7%89%B9%E7%82%B9"><span class="toc-number">8.3.2.</span> <span class="toc-text">3.2、特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81commit%E9%95%9C%E5%83%8F"><span class="toc-number">8.4.</span> <span class="toc-text">4、commit镜像</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%E3%80%81%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">9.</span> <span class="toc-text">第五章、容器数据卷</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E3%80%81Docker%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">第六章、Docker网络原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%E3%80%81idea%E6%95%B4%E5%90%88Docker"><span class="toc-number">11.</span> <span class="toc-text">第七章、idea整合Docker</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0%E3%80%81Docker-Compose"><span class="toc-number">12.</span> <span class="toc-text">第八章、Docker Compose</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0%E3%80%81Docker-Swarm"><span class="toc-number">13.</span> <span class="toc-text">第九章、Docker Swarm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0%E3%80%81CI-CDJenkins"><span class="toc-number">14.</span> <span class="toc-text">第十章、CI\CDJenkins</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%95%AA%E5%A4%96%EF%BC%9A%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB"><span class="toc-number">15.</span> <span class="toc-text">番外：命令汇总</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/829a9c.html" title="Java学习2">Java学习2</a><time datetime="2023-03-29T06:09:27.000Z" title="发表于 2023-03-29 14:09:27">2023-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6782be63.html" title="Docker学习">Docker学习</a><time datetime="2023-03-29T05:31:54.000Z" title="发表于 2023-03-29 13:31:54">2023-03-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/4a17b156.html" title="Hello World">Hello World</a><time datetime="2023-03-28T06:54:17.573Z" title="发表于 2023-03-28 14:54:17">2023-03-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By FebSnail</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>